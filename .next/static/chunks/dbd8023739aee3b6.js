(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,61721,56916,e=>{"use strict";var t,a;(a=t||(t={})).LOAD="LOAD",a.EXEC="EXEC",a.FFPROBE="FFPROBE",a.WRITE_FILE="WRITE_FILE",a.READ_FILE="READ_FILE",a.DELETE_FILE="DELETE_FILE",a.RENAME="RENAME",a.CREATE_DIR="CREATE_DIR",a.LIST_DIR="LIST_DIR",a.DELETE_DIR="DELETE_DIR",a.ERROR="ERROR",a.DOWNLOAD="DOWNLOAD",a.PROGRESS="PROGRESS",a.LOG="LOG",a.MOUNT="MOUNT",a.UNMOUNT="UNMOUNT",e.s(["CORE_URL",0,"https://unpkg.com/@ffmpeg/core@0.12.9/dist/umd/ffmpeg-core.js","FFMessageType",()=>t],61721);let r=Error("unknown message type"),s=Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),l=Error("called FFmpeg.terminate()"),i=Error("failed to import ffmpeg-core.js");e.s(["ERROR_IMPORT_FAILURE",0,i,"ERROR_NOT_LOADED",0,s,"ERROR_TERMINATED",0,l,"ERROR_UNKNOWN_MESSAGE_TYPE",0,r],56916)},67996,e=>{e.v({content:"UploadZone-module__SuXmHa__content",dragging:"UploadZone-module__SuXmHa__dragging",formats:"UploadZone-module__SuXmHa__formats",hiddenInput:"UploadZone-module__SuXmHa__hiddenInput",iconWrapper:"UploadZone-module__SuXmHa__iconWrapper",subtitle:"UploadZone-module__SuXmHa__subtitle",title:"UploadZone-module__SuXmHa__title",zone:"UploadZone-module__SuXmHa__zone"})},81271,e=>{e.v({card:"VideoGrid-module__YxI0mG__card",grid:"VideoGrid-module__YxI0mG__grid",gridContainer:"VideoGrid-module__YxI0mG__gridContainer",info:"VideoGrid-module__YxI0mG__info",overlay:"VideoGrid-module__YxI0mG__overlay",placeholderThumb:"VideoGrid-module__YxI0mG__placeholderThumb",playButton:"VideoGrid-module__YxI0mG__playButton",sectionTitle:"VideoGrid-module__YxI0mG__sectionTitle",thumbnail:"VideoGrid-module__YxI0mG__thumbnail",thumbnailWrapper:"VideoGrid-module__YxI0mG__thumbnailWrapper",videoTitle:"VideoGrid-module__YxI0mG__videoTitle"})},11004,e=>{e.v({activeBtn:"NetPlayer-module__LgmX7W__activeBtn",bottomBar:"NetPlayer-module__LgmX7W__bottomBar",centerPlay:"NetPlayer-module__LgmX7W__centerPlay",controlsOverlay:"NetPlayer-module__LgmX7W__controlsOverlay",controlsRow:"NetPlayer-module__LgmX7W__controlsRow",hidden:"NetPlayer-module__LgmX7W__hidden",iconBtn:"NetPlayer-module__LgmX7W__iconBtn",leftControls:"NetPlayer-module__LgmX7W__leftControls",playerContainer:"NetPlayer-module__LgmX7W__playerContainer",progressBar:"NetPlayer-module__LgmX7W__progressBar",progressContainer:"NetPlayer-module__LgmX7W__progressContainer",rightControls:"NetPlayer-module__LgmX7W__rightControls",selected:"NetPlayer-module__LgmX7W__selected",settingsColumn:"NetPlayer-module__LgmX7W__settingsColumn",settingsDivider:"NetPlayer-module__LgmX7W__settingsDivider",settingsMenu:"NetPlayer-module__LgmX7W__settingsMenu",settingsOption:"NetPlayer-module__LgmX7W__settingsOption",settingsOptionDisabled:"NetPlayer-module__LgmX7W__settingsOptionDisabled",spin:"NetPlayer-module__LgmX7W__spin",textBtn:"NetPlayer-module__LgmX7W__textBtn",timeDisplay:"NetPlayer-module__LgmX7W__timeDisplay",title:"NetPlayer-module__LgmX7W__title",topBar:"NetPlayer-module__LgmX7W__topBar",video:"NetPlayer-module__LgmX7W__video",volumeContainer:"NetPlayer-module__LgmX7W__volumeContainer",volumeSlider:"NetPlayer-module__LgmX7W__volumeSlider"})},51131,e=>{e.v("/_next/static/media/worker.c47db340.js")},5899,e=>{e.v(e.b(["static/chunks/35f855e714aa1a97.js","static/chunks/turbopack-23e602d3cb5e0896.js"]))},20897,e=>{e.v({content:"page-module___8aEwW__content",header:"page-module___8aEwW__header",logo:"page-module___8aEwW__logo",main:"page-module___8aEwW__main",uploadContainer:"page-module___8aEwW__uploadContainer",uploadRow:"page-module___8aEwW__uploadRow"})},52683,e=>{"use strict";let t;var a,r,s=e.i(43476),l=e.i(71645);async function i(e){return new Promise((t,a)=>{let r=document.createElement("video");r.src=e,r.muted=!0,r.crossOrigin="anonymous",r.currentTime=5,r.onloadeddata=()=>{r.duration<5&&(r.currentTime=.1*r.duration)},r.onseeked=()=>{let e=document.createElement("canvas");e.width=r.videoWidth,e.height=r.videoHeight;let s=e.getContext("2d");s?(s.drawImage(r,0,0,e.width,e.height),t(e.toDataURL("image/jpeg"))):a("Canvas context not found"),r.remove()},r.onerror=e=>{a(e),r.remove()},r.load()})}let n=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},o=(...e)=>e.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim();var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,l.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:n,...c},u)=>(0,l.createElement)("svg",{ref:u,...d,width:t,height:t,stroke:e,strokeWidth:r?24*Number(a)/Number(t):a,className:o("lucide",s),...!i&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(c)&&{"aria-hidden":"true"},...c},[...n.map(([e,t])=>(0,l.createElement)(e,t)),...Array.isArray(i)?i:[i]])),u=(e,t)=>{let a=(0,l.forwardRef)(({className:a,...r},s)=>(0,l.createElement)(c,{ref:s,iconNode:t,className:o(`lucide-${n(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,a),...r}));return a.displayName=n(e),a},m=u("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),h=u("film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);var p=e.i(67996);function f({onVideosSelected:e}){let t=(0,l.useRef)(null),[a,r]=(0,l.useState)(!1);return(0,s.jsxs)("div",{className:`${p.default.zone} ${a?p.default.dragging:""}`,onDragOver:e=>{e.preventDefault(),r(!0)},onDragLeave:e=>{e.preventDefault(),r(!1)},onDrop:t=>{if(t.preventDefault(),r(!1),t.dataTransfer.files&&t.dataTransfer.files.length>0){let a=Array.from(t.dataTransfer.files).filter(e=>e.type.startsWith("video/")||e.name.endsWith(".mkv"));a.length>0&&e(a)}},onClick:()=>{t.current?.click()},children:[(0,s.jsx)("input",{type:"file",multiple:!0,accept:"video/*,.mkv",ref:t,onChange:t=>{t.target.files&&t.target.files.length>0&&(e(Array.from(t.target.files)),t.target.value="")},className:p.default.hiddenInput}),(0,s.jsxs)("div",{className:p.default.content,children:[(0,s.jsx)("div",{className:p.default.iconWrapper,children:(0,s.jsx)(m,{size:48,className:p.default.icon})}),(0,s.jsx)("h2",{className:p.default.title,children:"Upload Videos"}),(0,s.jsx)("p",{className:p.default.subtitle,children:"Drag & drop local video files here, or click to browse"}),(0,s.jsxs)("div",{className:p.default.formats,children:[(0,s.jsx)(h,{size:16}),(0,s.jsx)("span",{children:"Supports MP4, WebM, MKV (if supported by browser)"})]})]})]})}let _=u("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);var g=e.i(81271);function y({videos:e,onVideoSelect:t}){return 0===e.length?null:(0,s.jsxs)("div",{className:g.default.gridContainer,children:[(0,s.jsx)("h2",{className:g.default.sectionTitle,children:"My List"}),(0,s.jsx)("div",{className:g.default.grid,children:e.map(e=>(0,s.jsxs)("div",{className:g.default.card,onClick:()=>t(e),children:[(0,s.jsxs)("div",{className:g.default.thumbnailWrapper,children:[e.thumbnailUrl?(0,s.jsx)("img",{src:e.thumbnailUrl,alt:e.name,className:g.default.thumbnail}):(0,s.jsx)("div",{className:g.default.placeholderThumb}),(0,s.jsx)("div",{className:g.default.overlay,children:(0,s.jsx)("div",{className:g.default.playButton,children:(0,s.jsx)(_,{fill:"white",size:24})})})]}),(0,s.jsx)("div",{className:g.default.info,children:(0,s.jsx)("h3",{className:g.default.videoTitle,children:e.name})})]},e.id))})]})}let v=u("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]),E=u("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),x=u("volume-x",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),k=u("maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]),w=u("minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]),N=u("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),R=u("captions",[["rect",{width:"18",height:"14",x:"3",y:"5",rx:"2",ry:"2",key:"12ruh7"}],["path",{d:"M7 15h4M15 15h2M7 11h2M13 11h4",key:"1ueiar"}]]),j=u("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var F=e.i(11004),T=e.i(61721);let b=(t=0,()=>t++);var L=e.i(56916);let M={get url(){return`file://${e.P("node_modules/@ffmpeg/ffmpeg/dist/esm/classes.js")}`}};class C{#e=null;#t={};#a={};#r=[];#s=[];loaded=!1;#l=()=>{this.#e&&(this.#e.onmessage=({data:{id:e,type:t,data:a}})=>{switch(t){case T.FFMessageType.LOAD:this.loaded=!0,this.#t[e](a);break;case T.FFMessageType.MOUNT:case T.FFMessageType.UNMOUNT:case T.FFMessageType.EXEC:case T.FFMessageType.FFPROBE:case T.FFMessageType.WRITE_FILE:case T.FFMessageType.READ_FILE:case T.FFMessageType.DELETE_FILE:case T.FFMessageType.RENAME:case T.FFMessageType.CREATE_DIR:case T.FFMessageType.LIST_DIR:case T.FFMessageType.DELETE_DIR:this.#t[e](a);break;case T.FFMessageType.LOG:this.#r.forEach(e=>e(a));break;case T.FFMessageType.PROGRESS:this.#s.forEach(e=>e(a));break;case T.FFMessageType.ERROR:this.#a[e](a)}delete this.#t[e],delete this.#a[e]})};#i=({type:e,data:t},a=[],r)=>this.#e?new Promise((s,l)=>{let i=b();this.#e&&this.#e.postMessage({id:i,type:e,data:t},a),this.#t[i]=s,this.#a[i]=l,r?.addEventListener("abort",()=>{l(new DOMException(`Message # ${i} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(L.ERROR_NOT_LOADED);on(e,t){"log"===e?this.#r.push(t):"progress"===e&&this.#s.push(t)}off(e,t){"log"===e?this.#r=this.#r.filter(e=>e!==t):"progress"===e&&(this.#s=this.#s.filter(e=>e!==t))}load=({classWorkerURL:t,...a}={},{signal:r}={})=>(this.#e||(this.#e=t?new Worker(new URL(t,M.url),{type:"module"}):new Worker(e.r(5899),{type:"module",type:void 0}),this.#l()),this.#i({type:T.FFMessageType.LOAD,data:a},void 0,r));exec=(e,t=-1,{signal:a}={})=>this.#i({type:T.FFMessageType.EXEC,data:{args:e,timeout:t}},void 0,a);ffprobe=(e,t=-1,{signal:a}={})=>this.#i({type:T.FFMessageType.FFPROBE,data:{args:e,timeout:t}},void 0,a);terminate=()=>{for(let e of Object.keys(this.#a))this.#a[e](L.ERROR_TERMINATED),delete this.#a[e],delete this.#t[e];this.#e&&(this.#e.terminate(),this.#e=null,this.loaded=!1)};writeFile=(e,t,{signal:a}={})=>{let r=[];return t instanceof Uint8Array&&r.push(t.buffer),this.#i({type:T.FFMessageType.WRITE_FILE,data:{path:e,data:t}},r,a)};mount=(e,t,a)=>this.#i({type:T.FFMessageType.MOUNT,data:{fsType:e,options:t,mountPoint:a}},[]);unmount=e=>this.#i({type:T.FFMessageType.UNMOUNT,data:{mountPoint:e}},[]);readFile=(e,t="binary",{signal:a}={})=>this.#i({type:T.FFMessageType.READ_FILE,data:{path:e,encoding:t}},void 0,a);deleteFile=(e,{signal:t}={})=>this.#i({type:T.FFMessageType.DELETE_FILE,data:{path:e}},void 0,t);rename=(e,t,{signal:a}={})=>this.#i({type:T.FFMessageType.RENAME,data:{oldPath:e,newPath:t}},void 0,a);createDir=(e,{signal:t}={})=>this.#i({type:T.FFMessageType.CREATE_DIR,data:{path:e}},void 0,t);listDir=(e,{signal:t}={})=>this.#i({type:T.FFMessageType.LIST_DIR,data:{path:e}},void 0,t);deleteDir=(e,{signal:t}={})=>this.#i({type:T.FFMessageType.DELETE_DIR,data:{path:e}},void 0,t)}(a=r||(r={})).MEMFS="MEMFS",a.NODEFS="NODEFS",a.NODERAWFS="NODERAWFS",a.IDBFS="IDBFS",a.WORKERFS="WORKERFS",a.PROXYFS="PROXYFS";let O=Error("failed to get response body reader"),D=Error("failed to complete download"),S=async e=>{let t;if("string"==typeof e)t=/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(e)?atob(e.split(",")[1]).split("").map(e=>e.charCodeAt(0)):await (await fetch(e)).arrayBuffer();else if(e instanceof URL)t=await (await fetch(e)).arrayBuffer();else{if(!(e instanceof File||e instanceof Blob))return new Uint8Array;t=await new Promise((t,a)=>{let r=new FileReader;r.onload=()=>{let{result:e}=r;e instanceof ArrayBuffer?t(new Uint8Array(e)):t(new Uint8Array)},r.onerror=e=>{a(Error(`File could not be read! Code=${e?.target?.error?.code||-1}`))},r.readAsArrayBuffer(e)})}return new Uint8Array(t)},A=async(e,t)=>{let a,r=await fetch(e);try{let s=parseInt(r.headers.get("Content-Length")||"-1"),l=r.body?.getReader();if(!l)throw O;let i=[],n=0;for(;;){let{done:a,value:r}=await l.read(),o=r?r.length:0;if(a){if(-1!=s&&s!==n)throw D;t&&t({url:e,total:s,received:n,delta:o,done:a});break}i.push(r),n+=o,t&&t({url:e,total:s,received:n,delta:o,done:a})}let o=new Uint8Array(n),d=0;for(let e of i)o.set(e,d),d+=e.length;a=o.buffer}catch(s){console.log("failed to send download progress event: ",s),a=await r.arrayBuffer(),t&&t({url:e,total:a.byteLength,received:a.byteLength,delta:0,done:!0})}return a},U=async(e,t,a=!1,r)=>{let s=new Blob([a?await A(e,r):await (await fetch(e)).arrayBuffer()],{type:t});return URL.createObjectURL(s)};function W({video:e,onBack:t}){let a=(0,l.useRef)(null),r=(0,l.useRef)(null),i=(0,l.useRef)(null),[n,o]=(0,l.useState)(!1),[d,c]=(0,l.useState)(0),[u,m]=(0,l.useState)(1),[h,p]=(0,l.useState)(!1),[f,g]=(0,l.useState)(!1),[y,T]=(0,l.useState)(!0),[b,L]=(0,l.useState)(!1),[M,O]=(0,l.useState)(null),[D,A]=(0,l.useState)([]),[W,I]=(0,l.useState)([]),[P,B]=(0,l.useState)(0),[X,$]=(0,l.useState)(-1),G=(0,l.useRef)(null);(0,l.useEffect)(()=>{a.current&&(a.current.play().catch(e=>console.log("Autoplay blocked",e)),o(!0),setTimeout(z,1e3))},[]);let z=()=>{if(!a.current)return;let e=a.current,t=e.audioTracks||e.mozAudioTracks||e.webkitAudioTracks;if(t){let e=[];for(let a=0;a<t.length;a++)e.push(t[a]),t[a].enabled&&B(a);A(e)}let r=Array.from(a.current.textTracks).filter(e=>"subtitles"===e.kind||"captions"===e.kind);I(r),$(r.findIndex(e=>"showing"===e.mode))},V=()=>{a.current&&(a.current.paused?(a.current.play(),o(!0)):(a.current.pause(),o(!1)))},H=e=>{if(!e)return"0:00";let t=new Date(1e3*e),a=t.getUTCHours(),r=t.getUTCMinutes(),s=t.getUTCSeconds().toString().padStart(2,"0");return a?`${a}:${r.toString().padStart(2,"0")}:${s}`:`${r}:${s}`},Y=async e=>{if(e.target.files&&e.target.files[0]){let t,r=e.target.files[0],s=await r.text(),l=s;r.name.endsWith(".srt")&&(t="WEBVTT\n\n",s.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split("\n\n").forEach(e=>{let a=e.split("\n");if(a.length>=2){let e=0;a[0].match(/^\d+$/)&&(e=1);let r=a[e];if(r&&r.includes("-->")){let s=r.replace(/,/g,".");t+=s+"\n";for(let r=e+1;r<a.length;r++)t+=a[r]+"\n";t+="\n"}}}),l=t),M&&URL.revokeObjectURL(M);let i=new Blob([l],{type:"text/vtt"});O(URL.createObjectURL(i)),setTimeout(()=>{z(),a.current&&Z(Array.from(a.current.textTracks).length-1)},500)}},Z=e=>{$(e),a.current&&Array.from(a.current.textTracks).filter(e=>"subtitles"===e.kind||"captions"===e.kind).forEach((t,a)=>{a===e?t.mode="showing":t.mode="hidden"})},{loaded:K,isLoading:q,load:J,extractSubtitles:Q}=(()=>{let[e,t]=(0,l.useState)(!1),[a,r]=(0,l.useState)(!1),s=(0,l.useRef)(new C);(0,l.useRef)(null);let i=async t=>{if(!e)return null;let a=s.current,r=await S(t);await a.writeFile("input.mkv",r);try{await a.exec(["-i","input.mkv","-map","0:s:0","-f","webvtt","output.vtt"]);let e=await a.readFile("output.vtt");await a.deleteFile("input.mkv"),await a.deleteFile("output.vtt");let t=new Blob([e],{type:"text/vtt"});return URL.createObjectURL(t)}catch(e){console.error("Extraction failed or no subtitles",e);try{await a.deleteFile("input.mkv")}catch{}return null}};return{loaded:e,isLoading:a,load:async()=>{r(!0);let e="https://unpkg.com/@ffmpeg/core@0.12.6/dist/umd",a=s.current;a.on("log",({message:e})=>{console.log(e)});try{await a.load({coreURL:await U(`${e}/ffmpeg-core.js`,"text/javascript"),wasmURL:await U(`${e}/ffmpeg-core.wasm`,"application/wasm"),workerURL:await U(`${e}/ffmpeg-core.worker.js`,"text/javascript")}),t(!0)}catch(e){console.error("FFmpeg load failed",e)}finally{r(!1)}},extractSubtitles:i}})(),[ee,et]=(0,l.useState)(!1),ea=async()=>{if(K||await J(),et(!0),e.file)try{let t=await Q(e.file);t?(O(t),setTimeout(()=>{let e=Array.from(a.current?.textTracks||[]);e.length>0&&Z(e.length-1)},500)):alert("No subtitles found or extraction failed.")}catch(e){console.error(e),alert("Scan failed.")}et(!1),L(!1)};return(0,l.useEffect)(()=>()=>{M&&URL.revokeObjectURL(M)},[M]),(0,s.jsxs)("div",{ref:r,className:F.default.playerContainer,onMouseMove:()=>{T(!0),G.current&&clearTimeout(G.current),G.current=setTimeout(()=>{n&&!b&&T(!1)},3e3)},onMouseLeave:()=>n&&!b&&T(!1),children:[(0,s.jsx)("video",{ref:a,src:e.url,className:F.default.video,onClick:V,onTimeUpdate:()=>{a.current&&c(a.current.currentTime/(a.current.duration||1)*100)},onEnded:()=>o(!1),children:M&&(0,s.jsx)("track",{kind:"subtitles",src:M,label:"Extracted/Custom",default:!0})}),(0,s.jsx)("input",{type:"file",ref:i,onChange:Y,accept:".srt,.vtt",style:{display:"none"}}),b&&(0,s.jsxs)("div",{className:F.default.settingsMenu,children:[(0,s.jsxs)("div",{className:F.default.settingsColumn,children:[(0,s.jsx)("h4",{children:"Audio"}),D.length>0?D.map((e,t)=>(0,s.jsx)("div",{className:`${F.default.settingsOption} ${P===t?F.default.selected:""}`,onClick:()=>(e=>{if(!a.current)return;let t=a.current,r=t.audioTracks||t.mozAudioTracks||t.webkitAudioTracks;if(r){for(let t=0;t<r.length;t++)r[t].enabled=t===e;B(e)}})(t),children:e.label||e.language||`Track ${t+1}`},t)):(0,s.jsx)("div",{className:F.default.settingsOptionDisabled,children:"Default Audio"})]}),(0,s.jsxs)("div",{className:F.default.settingsColumn,children:[(0,s.jsx)("h4",{children:"Subtitles"}),(0,s.jsx)("div",{className:`${F.default.settingsOption} ${-1===X?F.default.selected:""}`,onClick:()=>Z(-1),children:"Off"}),W.map((e,t)=>(0,s.jsx)("div",{className:`${F.default.settingsOption} ${X===t?F.default.selected:""}`,onClick:()=>Z(t),children:e.label||e.language||`Track ${t+1}`},t)),(0,s.jsx)("div",{className:F.default.settingsDivider}),(0,s.jsx)("div",{className:F.default.settingsOption,onClick:()=>{i.current?.click(),L(!1)},children:"Upload .srt..."}),(0,s.jsx)("div",{className:F.default.settingsDivider}),(0,s.jsx)("div",{className:F.default.settingsOption,onClick:ea,style:{color:"#aaa",fontSize:"0.8rem"},children:ee||q?(0,s.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,s.jsx)(j,{className:F.default.spin,size:14})," Scanning MKV..."]}):"Deep Scan (FFmpeg)"})]})]}),(0,s.jsxs)("div",{className:`${F.default.controlsOverlay} ${!y?F.default.hidden:""}`,children:[(0,s.jsxs)("div",{className:F.default.topBar,children:[(0,s.jsx)("button",{onClick:t,className:F.default.iconBtn,children:(0,s.jsx)(N,{size:32})}),(0,s.jsx)("h3",{className:F.default.title,children:e.name})]}),!n&&(0,s.jsx)("div",{className:F.default.centerPlay,onClick:V,children:(0,s.jsx)(_,{size:64,fill:"white"})}),(0,s.jsxs)("div",{className:F.default.bottomBar,children:[(0,s.jsx)("div",{className:F.default.progressContainer,children:(0,s.jsx)("input",{type:"range",className:F.default.progressBar,min:"0",max:"100",step:"0.1",value:d,onChange:e=>{let t=parseFloat(e.target.value);if(a.current){let e=a.current.duration||1;a.current.currentTime=t/100*e,c(t)}},style:{backgroundSize:`${d}% 100%`}})}),(0,s.jsxs)("div",{className:F.default.controlsRow,children:[(0,s.jsxs)("div",{className:F.default.leftControls,children:[(0,s.jsx)("button",{onClick:V,className:F.default.iconBtn,children:n?(0,s.jsx)(v,{fill:"white"}):(0,s.jsx)(_,{fill:"white"})}),(0,s.jsx)("button",{onClick:()=>{a.current&&(a.current.currentTime-=10)},className:F.default.textBtn,children:"-10s"}),(0,s.jsx)("button",{onClick:()=>{a.current&&(a.current.currentTime+=10)},className:F.default.textBtn,children:"+10s"}),(0,s.jsxs)("div",{className:F.default.volumeContainer,children:[(0,s.jsx)("button",{onClick:()=>{a.current&&(a.current.muted=!h,p(!h))},className:F.default.iconBtn,children:h||0===u?(0,s.jsx)(x,{}):(0,s.jsx)(E,{})}),(0,s.jsx)("input",{type:"range",min:"0",max:"1",step:"0.05",value:h?0:u,onChange:e=>{let t=parseFloat(e.target.value);m(t),a.current&&(a.current.volume=t,p(0===t))},className:F.default.volumeSlider})]}),(0,s.jsxs)("span",{className:F.default.timeDisplay,children:[a.current?H(a.current.currentTime):"0:00"," / ",a.current?H(a.current.duration):"0:00"]})]}),(0,s.jsxs)("div",{className:F.default.rightControls,children:[(0,s.jsx)("button",{className:`${F.default.iconBtn} ${b?F.default.activeBtn:""}`,onClick:()=>L(!b),title:"Audio & Subtitles",children:(0,s.jsx)(R,{})}),(0,s.jsx)("button",{onClick:()=>{document.fullscreenElement?(document.exitFullscreen(),g(!1)):(r.current?.requestFullscreen(),g(!0))},className:F.default.iconBtn,children:f?(0,s.jsx)(w,{}):(0,s.jsx)(k,{})})]})]})]})]})]})}var I=e.i(20897);function P(){let{videos:e,addVideos:t}=function(){let[e,t]=(0,l.useState)([]),a=(0,l.useCallback)(e=>{let a=e.map(e=>({id:crypto.randomUUID(),file:e,url:URL.createObjectURL(e),name:e.name}));a.forEach(async e=>{try{let a=await i(e.url);t(t=>t.map(t=>t.id===e.id?{...t,thumbnailUrl:a}:t))}catch(e){console.error("Failed to generate thumbnail",e)}}),t(e=>[...e,...a])},[]);return(0,l.useEffect)(()=>()=>{e.forEach(e=>URL.revokeObjectURL(e.url))},[]),{videos:e,addVideos:a}}(),[a,r]=(0,l.useState)(null);return(0,s.jsxs)("main",{className:I.default.main,children:[(0,s.jsx)("header",{className:I.default.header,children:(0,s.jsx)("h1",{className:I.default.logo,children:"PLAYFLIX"})}),a?(0,s.jsx)(W,{video:a,onBack:()=>{r(null)}}):(0,s.jsx)("div",{className:I.default.content,children:0===e.length?(0,s.jsx)("div",{className:I.default.uploadContainer,children:(0,s.jsx)(f,{onVideosSelected:t})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:I.default.uploadRow,children:(0,s.jsx)(f,{onVideosSelected:t})}),(0,s.jsx)(y,{videos:e,onVideoSelect:e=>{r(e)}})]})})]})}e.s(["default",()=>P],52683)}]);